---
title: 位运算的小技巧
date: 2019-11-23 20:32:12
categories:
    - 算法
tags: 
    - 位运算
mathjax: true
---

这两天事情很多，还是要坚持继续做题。

之前做N皇后回溯的时候发现有一个可以位运算的解法，多做了几道相关的题目，觉得有些地方还是比较难想的，记录下来。

### 规律
使用位运算的规律可以巧妙地解决一些问题，这些规律主要都是计算特性。

记忆尤深的是异或运算。一次异或值发生改变，两次异或就变回原值。
$$
x\bigoplus0=x
$$
$$
x\bigoplus x=0
$$
比方说[这道题](https://leetcode-cn.com/problems/single-number/)，一个数组内所有的数都出现了两次，只有一个数出现了一次，线性时间内求出这个数，就可以直接用0异或到底。此时应当注意学会举一反三，如果所有的数都出现了三次，找出唯一一个出现了一次的数，也可以直接用异或。一位的数只有两种状态，因此算两次就会回去；随着位数的增大，状态也在增多，算三次的话只需要使用一个两位的数来计算。
$$
00\bigoplus 1=01
$$
$$
01\bigoplus 1=10
$$
$$
10\bigoplus 1= 00 (mod3)
$$

[只出现一次的数字Ⅱ](https://leetcode-cn.com/problems/single-number-ii/comments/)

### 排列
同样位运算可以用来计算排列，占用的空间极小，计算还十分快捷。对有些问题本身就具有二进制的特点。比如说[求子集](https://leetcode-cn.com/problems/subsets/)，集合的子集本身就跟二进制有关，假设集合长为$n$，那么所有$0-2^n$之间的数就代表了所有子集的可能。

此时还可以提到的方法就是与运算，与运算可以用来检测当前某一位或者某几位是否有值。

### 占位
这个其实也是排列的一个延申，其实很多dfs的问题都可以这么解决。比如经典的[N皇后](https://leetcode-cn.com/problems/n-queens-ii/)问题，求n格的N皇后有几种解法，就可以用三个n位的二进制数表示当前列、主对角线，次对角线是否已经被占。这个方法相比dfs，可大大减少时间空间上的开销。

提到N皇后，有个小数学技巧可以用：主对角线等于横纵坐标之差，次对角线等于横纵坐标之和。这样就不用写麻烦的循环了。